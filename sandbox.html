<!doctype html>
<html>
  <head>
    <script src="handlebars-1.0.0.beta.6.js"></script>
  </head>
  <body>
    <script id="hello-world-template" type="text/x-handlebars-template">
      <div class="entry" style="
  z-index: 2000000000;
  position: fixed;
  background: #FFFFFF;
  border: 1px solid black;
  left: 80%;
  width: 20%;
  height: 100%;
  padding: 10px;">
  <div id="tabContainer">
    <div class="tab"></div>
  </div>
        <h1>test {{thing}}!</h1>
      </div>
    </script>
    <script>
      var templates = [];
      var source = document.getElementById('hello-world-template').innerHTML;
      templates['hello'] = Handlebars.compile(source);

      // Set up message event handler : Messages are sent from sandbox.html -> eventpage.js
      window.addEventListener('message', function(event) {
        var command = event.data.command;
        var name = event.data.name || 'hello';
        switch(command) {
          case 'render':
            event.source.postMessage({
              name: name,
              html: templates[name](event.data.context)
            }, event.origin);
            break;

          // You could imagine additional functionality. For instance:
          //
          // case 'new':
          //   templates[event.data.name] = Handlebars.compile(event.data.source);
          //   event.source.postMessage({name: name, success: true}, event.origin);
          //   break;
        }
      });
    </script>
  </body>
</html>
